Version 4
SHEET 1 2544 692
WIRE -384 -48 -576 -48
WIRE -192 -48 -384 -48
WIRE 0 -48 -192 -48
WIRE 256 -48 0 -48
WIRE 592 -48 256 -48
WIRE 912 -48 592 -48
WIRE 1104 -48 912 -48
WIRE 1424 -48 1104 -48
WIRE 1648 -48 1424 -48
WIRE -384 -32 -384 -48
WIRE 1104 -32 1104 -48
WIRE -192 0 -192 -48
WIRE 256 32 256 -48
WIRE 384 32 256 32
WIRE 0 48 0 32
WIRE 0 48 -128 48
WIRE 1104 48 1104 32
WIRE 1104 48 480 48
WIRE 1200 48 1104 48
WIRE 1344 48 1280 48
WIRE 1424 48 1424 32
WIRE 1424 48 1344 48
WIRE -384 64 -384 48
WIRE 384 64 256 64
WIRE 912 80 912 -48
WIRE 1424 80 1424 48
WIRE 1648 80 1648 -48
WIRE -384 128 -448 128
WIRE 1104 128 1104 48
WIRE -576 144 -576 -48
WIRE -384 144 -384 128
WIRE 592 160 592 -48
WIRE 688 160 592 160
WIRE 1424 160 1424 144
WIRE 1648 160 1648 144
WIRE 1648 160 1424 160
WIRE 912 176 912 160
WIRE 912 176 784 176
WIRE 0 192 0 128
WIRE 688 192 592 192
WIRE 1424 192 1424 160
WIRE 912 208 912 176
WIRE -192 224 -192 96
WIRE -192 224 -336 224
WIRE 64 224 32 224
WIRE 144 224 64 224
WIRE 256 224 256 64
WIRE 256 224 208 224
WIRE 256 240 256 224
WIRE -192 256 -192 224
WIRE -576 272 -576 224
WIRE 64 272 64 224
WIRE 592 304 592 192
WIRE 800 304 592 304
WIRE 912 304 912 288
WIRE 912 304 800 304
WIRE 1104 304 1104 208
WIRE 1104 304 912 304
WIRE 1424 320 1424 272
WIRE -384 368 -384 240
WIRE -192 368 -192 336
WIRE 0 368 0 256
WIRE 64 368 64 336
WIRE 256 368 256 320
FLAG -576 272 0
FLAG 256 368 0
FLAG 1424 320 0
FLAG 592 384 0
FLAG 800 304 REF_1.77V
FLAG -384 368 0
FLAG -448 128 out
FLAG 1344 48 EL
FLAG 0 368 0
FLAG 64 368 0
FLAG -192 368 0
SYMBOL voltage -576 128 R0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL AutoGenerated\\LM4041_N_ADJC1P233 432 48 M0
SYMATTR InstName U1
SYMBOL res 1408 -64 R0
SYMATTR InstName R1
SYMATTR Value 0.5
SYMBOL current 1424 192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value SINE(0 {amp} 50 20m 0 0 10.75)
SYMBOL res 240 224 R0
SYMATTR InstName R2
SYMATTR Value 4.7k
SYMBOL AutoGenerated\\LM4041_N_ADJC1P233 736 176 M0
SYMATTR InstName U2
SYMBOL res 576 288 R0
SYMATTR InstName R3
SYMATTR Value 4.7k
SYMBOL res 896 64 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 896 192 R0
SYMATTR InstName R5
SYMATTR Value 4.7k
SYMBOL res 1296 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 82k
SYMBOL res 1120 224 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 39k
SYMBOL nmos -336 144 M0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL res -400 -48 R0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL cap 1088 -32 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL schottky 1408 80 R0
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 1664 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL LED -400 64 R0
SYMATTR InstName D3
SYMATTR Value NSCW100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL Parts_TCO\\TLV431 0 224 R0
SYMATTR InstName U3
SYMBOL res -16 -64 R0
SYMATTR InstName R9
SYMATTR Value 2.2k
SYMBOL schottky 208 208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 48 272 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL res -16 32 R0
SYMATTR InstName R10
SYMATTR Value 2.2k
SYMBOL pnp -128 96 R180
SYMATTR InstName Q1
SYMATTR Value BC856B
SYMBOL res -208 240 R0
SYMATTR InstName R11
SYMATTR Value 10k
TEXT -600 440 Left 2 !.tran 500ms startup
TEXT -600 464 Left 2 !.param amp=250m
TEXT 1488 192 Left 2 ;I1 (with D1 and D2) is a an abstraction of the Class-AB power stage.  D1 and D2 are added\nto avoid reverse current flow through the sense resistor R1.
TEXT -160 416 Left 2 ;M1 is in parallel to Q3.  M1 can pull Q2 out of conduction.
TEXT 888 392 Left 2 ;R6+R7 might be replaced by a series combination of 33K - 10K trimpot - 75K resistor.
TEXT 1312 -200 Left 2 ;Trip point setting:\n1. Connect electronic load from net "EL" to ground.\n2. Sink 250mA from the load.\n3. Trim R6/R7 so that the LED just turns ON.
TEXT 40 -96 Left 2 ;D3 is red LED to indicate error condition.
TEXT 600 536 Left 2 ;U1 trips at 1.22V.  To avoid having 1.22V over the sense resistor R1, an extra offset\nis created with R6.  R7 completes that current path.  That extra offset voltage (over R6)\nmust be stable, that's the reason why U2 is configured as voltage reference.  The reference\nvoltage is about 1.77V, meaured from 5V to V- of U2.\nThe 1.77V is set up by R4 and R5.  The 1.77V is quite small, so it provides a greater \ngranularity for setting the offset voltage over R6.
TEXT -568 -240 Left 2 ;Is this the adequate protection for the final stage?\n250mA peaks should be allowed, while a 100mA DC-current must be blocked.
