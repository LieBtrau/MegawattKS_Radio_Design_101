Version 4
SHEET 1 2284 680
WIRE 64 -368 -80 -368
WIRE 624 -368 64 -368
WIRE 848 -368 624 -368
WIRE 960 -368 848 -368
WIRE -80 -304 -80 -368
WIRE 960 -304 960 -368
WIRE 64 -288 64 -368
WIRE 624 -240 624 -368
WIRE 848 -240 848 -368
WIRE 960 -192 960 -224
WIRE 1072 -192 960 -192
WIRE 1136 -192 1072 -192
WIRE -80 -176 -80 -224
WIRE 64 -176 64 -208
WIRE 144 -176 64 -176
WIRE 960 -160 960 -192
WIRE 64 -144 64 -176
WIRE 624 -112 624 -160
WIRE 704 -112 624 -112
WIRE 736 -112 704 -112
WIRE 832 -112 800 -112
WIRE 848 -112 848 -160
WIRE 848 -112 832 -112
WIRE 896 -112 848 -112
WIRE 624 -48 624 -112
WIRE 64 0 64 -64
WIRE 64 0 -48 0
WIRE 192 0 64 0
WIRE 288 0 256 0
WIRE 336 0 288 0
WIRE 496 0 416 0
WIRE 560 0 496 0
WIRE 960 16 960 -64
WIRE 288 64 288 0
WIRE 736 64 736 -112
WIRE 64 96 64 0
WIRE -624 112 -1056 112
WIRE 992 112 800 112
WIRE 1072 112 1072 -192
WIRE -1056 144 -1056 112
WIRE -432 144 -480 144
WIRE -208 144 -352 144
WIRE -48 144 -48 80
WIRE -48 144 -144 144
WIRE 0 144 -48 144
WIRE 624 160 624 48
WIRE 736 160 624 160
WIRE -624 176 -672 176
WIRE 288 192 288 128
WIRE 624 224 624 160
WIRE -1056 320 -1056 224
WIRE -672 320 -672 176
WIRE 64 352 64 192
FLAG 64 352 0
FLAG 208 -176 0
FLAG -80 -176 0
FLAG 624 224 0
FLAG 960 16 0
FLAG 1072 -192 out
FLAG 832 -112 base
FLAG 288 192 0
FLAG 704 -112 CQ2
FLAG 496 0 BQ2
FLAG -672 320 0
FLAG -1056 320 0
SYMBOL npn 0 96 R0
SYMATTR InstName Q1
SYMATTR Value SST3904
SYMBOL res 48 -304 R0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL cap 208 -192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL res -64 -16 R0
SYMATTR InstName R2
SYMATTR Value 1Meg
SYMBOL res 48 -160 R0
SYMATTR InstName R3
SYMATTR Value 2.7k
SYMBOL voltage -80 -320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL cap -144 128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL npn 560 -48 R0
SYMATTR InstName Q2
SYMATTR Value SST3904
SYMBOL res 608 -256 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 432 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL cap 256 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL cap 800 -128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 180p
SYMBOL npn 896 -160 R0
SYMATTR InstName Q3
SYMATTR Value SST3904
SYMBOL res 944 -320 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res 832 -256 R0
SYMATTR InstName R7
SYMATTR Value 20k
SYMBOL diode 304 128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL SpecialFunctions\\modulate -624 112 R0
WINDOW 3 11 -78 Left 2
SYMATTR Value mark=100e3 space=100e3
SYMATTR InstName A1
SYMBOL res -336 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL voltage -1056 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 0
SYMBOL npn 800 64 M0
SYMATTR InstName Q4
SYMATTR Value SST3904
SYMBOL res 1088 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 20k
TEXT -704 -304 Left 2 !.tran 0 100u 50u
TEXT 280 256 Left 2 ;https://electronics.stackexchange.com/questions/678492/pulse-generator-ll-art-of-electronics
TEXT 288 296 Left 2 ;C1/D1 diode clamp is required to prevent the base from Q2 from going too negative.
TEXT 1120 136 Left 2 ;Q4 added so that positive pulse on OUT can be longer than positive pulse on BQ2.
TEXT 768 -416 Left 2 ;R4=1K, C4=360p yields : 70% duty cycle\nFor 80% duty cycle (C4=390pF), R4 needs to be reduced to 220ohm to speed up charging of C4 in the short "off" part of the cycle.
TEXT 1152 -216 Left 2 ;2.7µs long high pulse at every rising edge of input signal.\nAt 300kHz (T=3.3µs), this leaves 600ns to recharge C4.  80% duty cycle\nAt 100kHz (T=10µs), that's 27% duty cycle.
